<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Code Examples: network.httppush.PackerExample Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="beepbeep-3.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Code Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacenetwork.html">network</a></li><li class="navelem"><a class="el" href="namespacenetwork_1_1httppush.html">httppush</a></li><li class="navelem"><a class="el" href="classnetwork_1_1httppush_1_1_packer_example.html">PackerExample</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-static-methods">Static Public Member Functions</a> &#124;
<a href="classnetwork_1_1httppush_1_1_packer_example-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">network.httppush.PackerExample Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Use a packer to send events in batch and reduce the number of HTTP requests.  
 <a href="classnetwork_1_1httppush_1_1_packer_example.html#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-static-methods"></a>
Static Public Member Functions</h2></td></tr>
<tr class="memitem:a3d6bede8552b01663d70752e51677e2c"><td class="memItemLeft" align="right" valign="top"><a id="a3d6bede8552b01663d70752e51677e2c"></a>
static void&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (String[] args)  throws ProcessorException, InterruptedException 	</td></tr>
<tr class="separator:a3d6bede8552b01663d70752e51677e2c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Use a packer to send events in batch and reduce the number of HTTP requests. </p>
<div class="image">
<img src="./doc-files/network/httppush/PackerExample.png" alt="Processor graph"/>
</div>
 <p>In this example, we send a relatively fast flow of events (about 1,000 per second) from one host to another using HTTP gateways (see <a class="el" href="classnetwork_1_1httppush_1_1_push_local_serialize.html">PushLocalSerialize</a> for an explanation of gateways). If we used the <a class="el" href="">HttpUpstreamGateway</a> directly, this would result in one HTTP request-response cycle for each event to be pushed over the network. However, each request has an associated overhead, which places an upper bound on the number of requests per second that can be sent. </p>
<p>The <a class="el" href="">TimePack</a> processor can be used to reduce the number of such requests. The packer accumulates events for a predetermined amount of time (say, one second), and outputs all accumulated events as a single <code>List</code> object when the time interval is expired. When coupled with a JSON serializer (to transform that list into a JSON string) and an <a class="el" href="">HttpUpstreamGateway</a>, this results in fewer HTTP requests, a smaller overhead, and hence an increased throughput. </p>
<p>Setting the packer to a relatively long interval (e.g. 1 second) will be such that a single HTTP request will contain a batch of about 1,000 events at a time. The output of the program should look like this: </p><pre>
Pushing 1000 events per second. Hit Ctrl+C to end.
1,717,1574,2432,3280,...
</pre><p> In contrast, setting the packer to a short time interval (e.g. 2 milliseconds) will result in the packer making much smaller bundles, which in turn will make the HTTP gateway send more HTTP requests. The output of the program should look like this: </p><pre>
Pushing 1000 events per second. Hit Ctrl+C to end.
1,393,830,1375,1966,...
</pre><p> Since every number corresponds to the cumulative number of events received at every passing second, one can see that sending too many HTTP requests results in a slower throughput than packing events and sending them in bulk periodically.</p>
<dl class="section author"><dt>Author</dt><dd>Sylvain Hall√© </dd></dl>

<p class="definition">Definition at line <a class="el" href="_packer_example_8java_source.html#l00086">86</a> of file <a class="el" href="_packer_example_8java_source.html">PackerExample.java</a>.</p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li>Source/src/network/httppush/<a class="el" href="_packer_example_8java_source.html">PackerExample.java</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
